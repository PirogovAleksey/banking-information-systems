<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тема 1: APIs та Web Services у банкінгу</title>
    <link rel="stylesheet" href="../../../../assets/css/slides.css">
</head>
<body class="slides-page">
<div class="slides-wrapper">
    <!-- Navigation -->
    <div class="slide-navigation">
        <button class="slide-btn" onclick="previousSlide()">◀</button>
        <span class="slide-counter" id="slideCounter">1 / 12</span>
        <button class="slide-btn" onclick="nextSlide()">▶</button>
        <button class="slide-btn" onclick="toggleFullscreen()">⛶</button>
        <button class="slide-btn" onclick="exitPresentation()">✕</button>
    </div>

    <!-- Progress Bar -->
    <div class="slide-progress">
        <div class="slide-progress-bar" id="progressBar" style="width: 8.33%;"></div>
    </div>

    <!-- Slide 1: Title -->
    <div class="slide active" id="slide1">
        <div class="slide-container">
            <div class="slide-title">
                <h1>APIs та Web Services у банкінгу</h1>
                <div class="subtitle">Banking APIs and Integration Protocols</div>
                <div class="content">
                    <p><strong>Модуль 2:</strong> Core Banking Systems</p>
                    <p><strong>Лекція 2.2:</strong> Інтеграція CBS з зовнішніми системами</p>
                    <p><strong>Тема 1</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 2: REST vs SOAP vs GraphQL -->
    <div class="slide" id="slide2">
        <div class="slide-container">
            <div class="slide-content">
                <h2>Порівняння API протоколів</h2>
                <h3>REST vs SOAP vs GraphQL</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.85em;">
                    <tr style="background: var(--color-primary); color: white;">
                        <th style="padding: 10px; border: 1px solid #ddd;">Критерій</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">REST</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">SOAP</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">GraphQL</th>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Протокол</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">HTTP/HTTPS</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">HTTP, SMTP, TCP</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">HTTP/HTTPS</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Формат даних</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">JSON, XML</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">XML only</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">JSON</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Складність</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Низька</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Висока</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Середня</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Performance</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">⭐⭐⭐⭐</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">⭐⭐</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">⭐⭐⭐⭐⭐</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Security</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">TLS, OAuth</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">WS-Security</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">TLS, OAuth</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Використання</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Web, Mobile APIs</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Enterprise, Legacy</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Complex queries</td>
                    </tr>
                </table>
                <div class="alert alert-info">
                    <strong>Тренд:</strong> 85% нових банківських API використовують REST, SOAP залишається в legacy системах
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 3: Open Banking Standards -->
    <div class="slide" id="slide3">
        <div class="slide-container">
            <div class="slide-content">
                <h2>Open Banking API Standards</h2>
                <h3>Регуляторні вимоги та стандарти</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 10px;">
                        <h4>PSD2 (EU)</h4>
                        <p><strong>Payment Services Directive 2</strong></p>
                        <ul class="slide-list">
                            <li>Обов'язковий з 2018 для EU банків</li>
                            <li>Strong Customer Authentication (SCA)</li>
                            <li>Account Information Services (AIS)</li>
                            <li>Payment Initiation Services (PIS)</li>
                            <li>Berlin Group NextGenPSD2 standard</li>
                        </ul>
                    </div>
                    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 20px; border-radius: 10px;">
                        <h4>UK Open Banking</h4>
                        <p><strong>Competition and Markets Authority</strong></p>
                        <ul class="slide-list">
                            <li>9 найбільших UK банків</li>
                            <li>Open Banking Standard v3.1</li>
                            <li>OAuth 2.0 + FAPI security</li>
                            <li>Consent management</li>
                            <li>7M+ користувачів у 2024</li>
                        </ul>
                    </div>
                </div>
                <div class="slide-statistics">
                    <div class="stat-item">
                        <div class="stat-value">400+</div>
                        <div class="stat-description">TPP providers в EU</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">€500M+</div>
                        <div class="stat-description">Інвестиції у Open Banking</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">63%</div>
                        <div class="stat-description">Банків готові до PSD2</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 4: API Gateway Patterns -->
    <div class="slide" id="slide4">
        <div class="slide-container">
            <div class="slide-content">
                <h2>API Gateway Architecture</h2>
                <h3>Централізоване управління API</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 20px 0;">
                    <div style="background: rgba(100,255,218,0.2); padding: 15px; border-radius: 8px;">
                        <h4>Kong Gateway</h4>
                        <ul style="font-size: 0.9em;">
                            <li>Open-source + Enterprise</li>
                            <li>Nginx-based</li>
                            <li>Plugin ecosystem (200+)</li>
                            <li>Multi-cloud support</li>
                            <li>Rate limiting, caching</li>
                        </ul>
                        <p style="margin-top: 10px;"><strong>Використовують:</strong> Yahoo, Nasdaq</p>
                    </div>
                    <div style="background: rgba(255,100,100,0.2); padding: 15px; border-radius: 8px;">
                        <h4>Apigee (Google)</h4>
                        <ul style="font-size: 0.9em;">
                            <li>Full-featured platform</li>
                            <li>Analytics та monitoring</li>
                            <li>Developer portal</li>
                            <li>API monetization</li>
                            <li>GCP native</li>
                        </ul>
                        <p style="margin-top: 10px;"><strong>Використовують:</strong> HSBC, Walgreens</p>
                    </div>
                    <div style="background: rgba(255,255,100,0.2); padding: 15px; border-radius: 8px;">
                        <h4>AWS API Gateway</h4>
                        <ul style="font-size: 0.9em;">
                            <li>Serverless-friendly</li>
                            <li>Lambda integration</li>
                            <li>Auto-scaling</li>
                            <li>Pay-per-use</li>
                            <li>WebSocket support</li>
                        </ul>
                        <p style="margin-top: 10px;"><strong>Використовують:</strong> Capital One, Intuit</p>
                    </div>
                </div>
                <div class="alert alert-warning">
                    <strong>Security:</strong> API Gateway = single point of failure. Потрібен HA setup + DDoS protection
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 5: Monobank API -->
    <div class="slide" id="slide5">
        <div class="slide-container">
            <div class="slide-banking-example">
                <div class="banking-logo">🏦</div>
                <div class="banking-title">Приклад: Monobank API</div>
                <h3>Public API для розробників</h3>
                <div style="margin: 20px 0;">
                    <h4>Основні можливості:</h4>
                    <ul class="slide-list">
                        <li><strong>GET /bank/currency</strong> - курси валют (публічний, без auth)</li>
                        <li><strong>GET /personal/client-info</strong> - інформація про клієнта</li>
                        <li><strong>GET /personal/statement/{account}/{from}/{to}</strong> - виписка</li>
                        <li><strong>POST /personal/webhook</strong> - налаштування вебхуків</li>
                    </ul>
                    <h4 style="margin-top: 20px;">Особливості API:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <ul class="slide-list">
                                <li>RESTful JSON API</li>
                                <li>Token-based authentication</li>
                                <li>Rate limit: 1 request/min для statements</li>
                                <li>Webhook для real-time подій</li>
                            </ul>
                        </div>
                        <div>
                            <ul class="slide-list">
                                <li>HTTPS only (TLS 1.2+)</li>
                                <li>Відсутність IP whitelist</li>
                                <li>Безкоштовний для особистого використання</li>
                                <li>Corporate API окремо</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="alert alert-info">
                    <strong>Статистика:</strong> 10,000+ розробників використовують Monobank API для фінансових додатків
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 6: PrivatBank API -->
    <div class="slide" id="slide6">
        <div class="slide-container">
            <div class="slide-banking-example">
                <div class="banking-logo">🏦</div>
                <div class="banking-title">Приклад: PrivatBank API</div>
                <h3>Merchant та Corporate APIs</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>Merchant API (P2P, LiqPay):</h4>
                        <ul class="slide-list">
                            <li>Прийом платежів</li>
                            <li>Checkout forms</li>
                            <li>Recurring payments</li>
                            <li>3D-Secure integration</li>
                            <li>Webhook callbacks</li>
                        </ul>
                    </div>
                    <div>
                        <h4>Corporate API (Privat24 Business):</h4>
                        <ul class="slide-list">
                            <li>XML-based SOAP</li>
                            <li>Виписки та платежі</li>
                            <li>Валютний контроль</li>
                            <li>Digital signatures (ЕЦП)</li>
                            <li>IP whitelist обов'язковий</li>
                        </ul>
                    </div>
                </div>
                <div class="alert alert-warning">
                    <strong>Security:</strong> Corporate API вимагає RSA-2048 ЕЦП + IP whitelist + VPN tunnel для критичних операцій
                </div>
                <h4 style="margin-top: 20px;">API Stats:</h4>
                <div class="slide-statistics">
                    <div class="stat-item">
                        <div class="stat-value">500K+</div>
                        <div class="stat-description">Merchants</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">99.97%</div>
                        <div class="stat-description">API Uptime</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">5M+</div>
                        <div class="stat-description">API calls/день</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 7: API Versioning Strategies -->
    <div class="slide" id="slide7">
        <div class="slide-container">
            <div class="slide-content">
                <h2>API Versioning Strategies</h2>
                <h3>Підходи до версіонування API</h3>
                <div style="margin: 20px 0;">
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4>1. URI Versioning (найпопулярніший)</h4>
                        <p><code>https://api.bank.com/v1/accounts</code></p>
                        <p><code>https://api.bank.com/v2/accounts</code></p>
                        <p><strong>Переваги:</strong> Зрозуміло, легко кешувати | <strong>Недоліки:</strong> Засмічує URI простір</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4>2. Header Versioning</h4>
                        <p><code>Accept: application/vnd.bank.v2+json</code></p>
                        <p><strong>Переваги:</strong> Чистий URI, RESTful | <strong>Недоліки:</strong> Складніше тестувати</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4>3. Query Parameter Versioning</h4>
                        <p><code>https://api.bank.com/accounts?version=2</code></p>
                        <p><strong>Переваги:</strong> Гнучкість | <strong>Недоліки:</strong> Не RESTful, складніше routing</p>
                    </div>
                </div>
                <div class="alert alert-success">
                    <strong>Best Practice:</strong> URI versioning + deprecation period 12-24 місяці для критичних API
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 8: API Deprecation Strategy -->
    <div class="slide" id="slide8">
        <div class="slide-container">
            <div class="slide-content">
                <h2>API Deprecation Lifecycle</h2>
                <h3>Безпечне виведення застарілих версій</h3>
                <div style="margin: 30px 0;">
                    <div style="position: relative; padding-left: 40px;">
                        <div style="position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: linear-gradient(to bottom, #4ade80, #f59e0b, #ef4444);"></div>

                        <div style="margin-bottom: 25px; padding-left: 20px;">
                            <h4 style="color: #4ade80;">Phase 1: Announcement (t=0)</h4>
                            <ul class="slide-list">
                                <li>Публічне оголошення про deprecation</li>
                                <li>Email всім API consumers</li>
                                <li>Додати <code>Sunset</code> HTTP header</li>
                                <li>Оновити документацію</li>
                            </ul>
                        </div>

                        <div style="margin-bottom: 25px; padding-left: 20px;">
                            <h4 style="color: #4ade80;">Phase 2: Warning Period (t+3 months)</h4>
                            <ul class="slide-list">
                                <li>Deprecation warnings в responses</li>
                                <li>Моніторинг usage metrics</li>
                                <li>Direct outreach до активних users</li>
                            </ul>
                        </div>

                        <div style="margin-bottom: 25px; padding-left: 20px;">
                            <h4 style="color: #f59e0b;">Phase 3: Grace Period (t+6 months)</h4>
                            <ul class="slide-list">
                                <li>Обмеження rate limits</li>
                                <li>Forced migration для великих consumers</li>
                                <li>Final warnings</li>
                            </ul>
                        </div>

                        <div style="padding-left: 20px;">
                            <h4 style="color: #ef4444;">Phase 4: Sunset (t+12 months)</h4>
                            <ul class="slide-list">
                                <li>API повністю вимкнено</li>
                                <li>HTTP 410 Gone responses</li>
                                <li>Redirect до документації міграції</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 9: API Security Overview -->
    <div class="slide" id="slide9">
        <div class="slide-container">
            <div class="slide-cyber-security">
                <h2>API Security: Загальний огляд</h2>
                <h3>Багаторівневий захист банківських API</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>Authentication & Authorization:</h4>
                        <ul class="slide-list">
                            <li><strong>OAuth 2.0</strong> - делеговане авторизування</li>
                            <li><strong>JWT tokens</strong> - stateless authentication</li>
                            <li><strong>API Keys</strong> - для server-to-server</li>
                            <li><strong>mTLS</strong> - mutual certificate authentication</li>
                        </ul>
                    </div>
                    <div>
                        <h4>Transport Security:</h4>
                        <ul class="slide-list">
                            <li><strong>TLS 1.3</strong> - шифрування в transit</li>
                            <li><strong>Certificate pinning</strong> - MITM захист</li>
                            <li><strong>HSTS</strong> - force HTTPS</li>
                            <li><strong>Perfect Forward Secrecy</strong></li>
                        </ul>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>Threat Protection:</h4>
                        <ul class="slide-list">
                            <li><strong>Rate limiting</strong> - запобігання abuse</li>
                            <li><strong>Input validation</strong> - SQL injection, XSS</li>
                            <li><strong>WAF</strong> - web application firewall</li>
                            <li><strong>DDoS mitigation</strong></li>
                        </ul>
                    </div>
                    <div>
                        <h4>Monitoring & Compliance:</h4>
                        <ul class="slide-list">
                            <li><strong>Audit logging</strong> - повний trail</li>
                            <li><strong>Anomaly detection</strong> - ML-based</li>
                            <li><strong>PCI DSS</strong> - card data protection</li>
                            <li><strong>GDPR</strong> - privacy compliance</li>
                        </ul>
                    </div>
                </div>
                <div class="cyber-threat-level threat-medium">⚠️ API атаки зросли на 400% у 2023 році</div>
            </div>
        </div>
    </div>

    <!-- Slide 10: API Security Breach Case -->
    <div class="slide" id="slide10">
        <div class="slide-container">
            <div class="slide-cyber-security">
                <h2>Кейс: Capital One API Breach (2019)</h2>
                <h3>Найбільший API breach в історії банкінгу</h3>
                <div style="margin: 20px 0;">
                    <h4>Що сталося:</h4>
                    <ul class="slide-list">
                        <li>Компрометовано 100M+ записів клієнтів Capital One</li>
                        <li>Атака через misconfigured AWS WAF</li>
                        <li>Зловмисник використав SSRF вразливість</li>
                        <li>Доступ до S3 buckets через IAM credentials</li>
                    </ul>
                    <h4 style="margin-top: 20px;">Root Causes:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 10px 0;">
                        <div style="background: rgba(239,68,68,0.2); padding: 15px; border-radius: 8px;">
                            <p><strong>1. Надмірні IAM привілеї</strong></p>
                            <p>WAF мав доступ до sensitive S3 buckets</p>
                        </div>
                        <div style="background: rgba(239,68,68,0.2); padding: 15px; border-radius: 8px;">
                            <p><strong>2. SSRF вразливість</strong></p>
                            <p>Metadata endpoint exploitation</p>
                        </div>
                        <div style="background: rgba(239,68,68,0.2); padding: 15px; border-radius: 8px;">
                            <p><strong>3. Відсутність network segmentation</strong></p>
                            <p>WAF міг досягти внутрішніх ресурсів</p>
                        </div>
                        <div style="background: rgba(239,68,68,0.2); padding: 15px; border-radius: 8px;">
                            <p><strong>4. Недостатній monitoring</strong></p>
                            <p>Breach виявлений через 4 місяці</p>
                        </div>
                    </div>
                    <div class="slide-statistics" style="margin-top: 20px;">
                        <div class="stat-item">
                            <div class="stat-value">$80M</div>
                            <div class="stat-description">Штраф регулятора</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">$150M</div>
                            <div class="stat-description">Settlement витрати</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">-6%</div>
                            <div class="stat-description">Падіння акцій</div>
                        </div>
                    </div>
                </div>
                <div class="cyber-threat-level threat-high">🚨 LESSON: API security = cloud security + network security + IAM</div>
            </div>
        </div>
    </div>

    <!-- Slide 11: API Testing Strategy -->
    <div class="slide" id="slide11">
        <div class="slide-container">
            <div class="slide-content">
                <h2>API Testing Best Practices</h2>
                <h3>Комплексне тестування банківських API</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 20px 0;">
                    <div style="background: rgba(100,255,218,0.2); padding: 15px; border-radius: 8px;">
                        <h4>Functional Testing</h4>
                        <ul style="font-size: 0.9em;">
                            <li>Unit tests (Jest, Mocha)</li>
                            <li>Integration tests</li>
                            <li>Contract testing (Pact)</li>
                            <li>End-to-end tests</li>
                            <li>Regression testing</li>
                        </ul>
                    </div>
                    <div style="background: rgba(255,100,100,0.2); padding: 15px; border-radius: 8px;">
                        <h4>Security Testing</h4>
                        <ul style="font-size: 0.9em;">
                            <li>OWASP ZAP scanning</li>
                            <li>SQL injection tests</li>
                            <li>XSS vulnerability tests</li>
                            <li>Authentication bypass</li>
                            <li>Authorization testing</li>
                        </ul>
                    </div>
                    <div style="background: rgba(255,255,100,0.2); padding: 15px; border-radius: 8px;">
                        <h4>Performance Testing</h4>
                        <ul style="font-size: 0.9em;">
                            <li>Load testing (JMeter)</li>
                            <li>Stress testing</li>
                            <li>Spike testing</li>
                            <li>Endurance testing</li>
                            <li>Latency benchmarks</li>
                        </ul>
                    </div>
                </div>
                <div class="alert alert-info">
                    <strong>Tools:</strong> Postman/Newman, SoapUI, REST Assured, Karate DSL, Artillery, k6
                </div>
                <h4 style="margin-top: 20px;">Testing Metrics:</h4>
                <div class="slide-statistics">
                    <div class="stat-item">
                        <div class="stat-value">95%+</div>
                        <div class="stat-description">Code coverage</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">&lt;200ms</div>
                        <div class="stat-description">P95 latency target</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">99.99%</div>
                        <div class="stat-description">Success rate SLA</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 12: Підсумки -->
    <div class="slide" id="slide12">
        <div class="slide-container">
            <div class="slide-content">
                <h2>Підсумки: APIs у банкінгу</h2>
                <h3>Ключові висновки</h3>
                <ul class="slide-list">
                    <li><strong>REST домінує</strong> - 85% нових банківських API використовують REST/JSON</li>
                    <li><strong>Open Banking стандарти</strong> - PSD2, UK Open Banking змінюють індустрію</li>
                    <li><strong>API Gateway критичний</strong> - Kong, Apigee, AWS API Gateway для централізованого управління</li>
                    <li><strong>Українські приклади</strong> - Monobank API (RESTful), PrivatBank (SOAP+REST hybrid)</li>
                    <li><strong>Versioning strategy важлива</strong> - URI versioning + 12-місячний deprecation period</li>
                    <li><strong>Security - пріоритет #1</strong> - OAuth 2.0, JWT, rate limiting, WAF обов'язкові</li>
                    <li><strong>Testing критичний</strong> - functional + security + performance testing</li>
                    <li><strong>Real breaches вчать</strong> - Capital One: $230M збитків через API misconfiguration</li>
                </ul>
                <div class="alert alert-success">
                    <h4>Наступна тема:</h4>
                    <p>Message Queues та Event-Driven Architecture для асинхронної інтеграції</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let currentSlide = 1;
    const totalSlides = 12;

    function showSlide(n) {
        const slides = document.querySelectorAll('.slide');
        const progressBar = document.getElementById('progressBar');
        const counter = document.getElementById('slideCounter');

        if (n > totalSlides) currentSlide = 1;
        if (n < 1) currentSlide = totalSlides;

        slides.forEach(slide => slide.classList.remove('active'));
        document.getElementById(`slide${currentSlide}`).classList.add('active');

        progressBar.style.width = (currentSlide / totalSlides * 100) + '%';
        counter.textContent = `${currentSlide} / ${totalSlides}`;
    }

    function nextSlide() {
        currentSlide++;
        showSlide(currentSlide);
    }

    function previousSlide() {
        currentSlide--;
        showSlide(currentSlide);
    }

    function toggleFullscreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    }

    function exitPresentation() {
        window.location.href = 'index.html';
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        switch(e.key) {
            case 'ArrowRight':
            case ' ':
                nextSlide();
                break;
            case 'ArrowLeft':
                previousSlide();
                break;
            case 'Escape':
                exitPresentation();
                break;
            case 'f':
            case 'F':
                toggleFullscreen();
                break;
            case 'Home':
                currentSlide = 1;
                showSlide(currentSlide);
                break;
            case 'End':
                currentSlide = totalSlides;
                showSlide(currentSlide);
                break;
        }
    });

    // Touch events for mobile
    let startX = null;
    document.addEventListener('touchstart', function(e) {
        startX = e.touches[0].clientX;
    });

    document.addEventListener('touchend', function(e) {
        if (!startX) return;

        const endX = e.changedTouches[0].clientX;
        const diffX = startX - endX;

        if (Math.abs(diffX) > 50) {
            if (diffX > 0) {
                nextSlide();
            } else {
                previousSlide();
            }
        }
        startX = null;
    });

    // Initialize
    showSlide(1);

    // Save progress
    function saveProgress() {
        try {
            const progress = {
                currentSlide: currentSlide,
                totalSlides: totalSlides,
                timestamp: new Date().toISOString(),
                topic: 'APIs and Web Services'
            };
            localStorage.setItem('lecture_2_2_tema1_progress', JSON.stringify(progress));
        } catch(e) {
            console.log('Could not save progress');
        }
    }

    // Load progress
    function loadProgress() {
        try {
            const saved = localStorage.getItem('lecture_2_2_tema1_progress');
            if (saved) {
                const progress = JSON.parse(saved);
                if (progress.currentSlide) {
                    currentSlide = progress.currentSlide;
                    showSlide(currentSlide);
                }
            }
        } catch(e) {
            console.log('Could not load progress');
        }
    }

    window.addEventListener('beforeunload', saveProgress);
    loadProgress();
</script>
</body>
</html>
